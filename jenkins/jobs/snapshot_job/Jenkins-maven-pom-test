pipeline {
  agent any

  environment{
      MAVEN_IMAGE = 'maven:3.6-jdk-8'
      DEPLOY_SERVER = "${params.DEPLOY_TO_TEST ? 'ine-tit-app04' : 'ine-dit-app04'}"
  }
  

  stages{
    stage('Preparation') {
      steps{
        echo "Print provided parameters"
        echo "DEPLOY_TO_TEST ${params.DEPLOY_TO_TEST}"
        echo "CONFIG_FILE_ID ${params.CONFIG_FILE_ID}"
        echo "SSH_AGENT ${params.SSH_AGENT_ID}"
      }
    }

    stage('Deploy') {
      environment{
        MAVEN_POM_VERSION = readMavenPom().getVersion()
        POM_2 = readMavenPom file: 'pom.xml'
        MAVEN_POM_V2 = "${POM_2}.version"
      }
      steps{
        echo "${MAVEN_POM_VERSION}"
        echo "${MAVEN_POM_V2}"
      }
    }
  }
}